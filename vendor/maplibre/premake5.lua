project "ml-core"
    kind "StaticLib"
    language "C++"
    cppdialect "C++17"
    staticruntime "off"

    files 
    {
        "include/mbgl/actor/**.hpp",
        "include/mbgl/annotation/**.hpp",
        "include/mbgl/gfx/**.hpp",
        "include/mbgl/gl/**.hpp",
        "include/mbgl/i18n/**.hpp",
        "include/mbgl/layermanager/**.hpp",
        "include/mbgl/map/**.hpp",
        "include/mbgl/math/**.hpp",
        "include/mbgl/platform/**.hpp",
        "include/mbgl/renderer/**.hpp",
        "include/mbgl/shaders/*.hpp",
        "include/mbgl/shaders/gl/*.hpp",
        "include/mbgl/storage/*.hpp",
        "include/mbgl/style/*.hpp",
        "include/mbgl/tile/*.hpp",
        "include/mbgl/util/*.hpp",
        "src/mbgl/actor/**.hpp",
        "src/mbgl/annotation/**.hpp",
        "src/mbgl/gfx/**.hpp",
        "src/mbgl/gl/**.hpp",
        "src/mbgl/i18n/**.hpp",
        "src/mbgl/layermanager/**.hpp",
        "src/mbgl/map/**.hpp",
        "src/mbgl/math/**.hpp",
        "src/mbgl/geometry/*.hpp",
        "src/mbgl/platform/**.hpp",
        "src/mbgl/renderer/**.hpp",
        "src/mbgl/shaders/*.hpp",
        "src/mbgl/shaders/gl/*.hpp",
        "src/mbgl/storage/*.hpp",
        "src/mbgl/style/**.hpp",
        "src/mbgl/tile/*.hpp",
        "src/mbgl/util/*.hpp",
        "src/mbgl/sprite/*.hpp",
        "src/mbgl/actor/**.cpp",
        "src/mbgl/annotation/**.cpp",
        "src/mbgl/gfx/**.cpp",
        "src/mbgl/gl/**.cpp",
        "src/mbgl/i18n/**.cpp",
        "src/mbgl/geometry/*.cpp",
        "src/mbgl/layermanager/**.cpp",
        "src/mbgl/map/**.cpp",
        "src/mbgl/math/**.cpp",
        "src/mbgl/platform/**.cpp",
        "src/mbgl/renderer/**.cpp",
        "src/mbgl/shaders/*.cpp",
        "src/mbgl/shaders/gl/*.cpp",
        "src/mbgl/storage/*.cpp",
        "src/mbgl/style/**.cpp",
        "src/mbgl/tile/*.cpp",
        "src/mbgl/sprite/*.cpp",
        "src/mbgl/util/*.cpp",
        "src/mbgl/text/*.cpp",
        "src/mbgl/text/*.hpp",
        "src/mbgl/programs/*.hpp",
        "src/mbgl/programs/*.cpp",
        "src/mbgl/layout/*.cpp",
        "src/mbgl/layout/*.cpp",
        "platform/default/src/mbgl/gfx/headless_backend.cpp",
        "platform/default/src/mbgl/gfx/headless_frontend.cpp",
        "platform/default/src/mbgl/gl/headless_backend.cpp",
        "platform/default/src/mbgl/i18n/collator.cpp",
        "platform/default/src/mbgl/i18n/number_format.cpp",
        "platform/default/src/mbgl/layermanager/layer_manager.cpp",
        "platform/default/src/mbgl/platform/time.cpp",
        "platform/default/src/mbgl/storage/asset_file_source.cpp",
        "platform/default/src/mbgl/storage/database_file_source.cpp",
        "platform/default/src/mbgl/storage/file_source_manager.cpp",
        "platform/default/src/mbgl/storage/file_source_request.cpp",
        "platform/default/src/mbgl/storage/http_file_source.cpp",
        "platform/default/src/mbgl/storage/local_file_request.cpp",
        "platform/default/src/mbgl/storage/local_file_source.cpp",
        "platform/default/src/mbgl/storage/mbtiles_file_source.cpp",
        "platform/default/src/mbgl/storage/main_resource_loader.cpp",
        "platform/default/src/mbgl/storage/offline.cpp",
        "platform/default/src/mbgl/storage/offline_database.cpp",
        "platform/default/src/mbgl/storage/offline_download.cpp",
        "platform/default/src/mbgl/storage/online_file_source.cpp",
        "platform/default/src/mbgl/storage/sqlite3.cpp",
        "platform/default/src/mbgl/text/bidi.cpp",
        "platform/default/src/mbgl/text/local_glyph_rasterizer.cpp",
        "platform/default/src/mbgl/util/async_task.cpp",
        "platform/default/src/mbgl/util/compression.cpp",
        "platform/default/src/mbgl/util/filesystem.cpp",
        "platform/default/src/mbgl/util/image.cpp",
        "platform/default/src/mbgl/util/jpeg_reader.cpp",
        "platform/default/src/mbgl/util/webp_reader.cpp",
        "platform/default/src/mbgl/util/logging_stderr.cpp",
        "platform/default/src/mbgl/util/monotonic_timer.cpp",
        "platform/default/src/mbgl/util/png_reader.cpp",
        "platform/default/src/mbgl/util/png_writer.cpp",
        "platform/default/src/mbgl/util/run_loop.cpp",
        "platform/default/src/mbgl/util/string_stdlib.cpp",
        "platform/default/src/mbgl/util/timer.cpp",
        "platform/default/src/mbgl/util/utf.cpp",
        "platform/windows/src/thread.cpp",
        "platform/windows/src/thread_local.cpp",
        "platform/windows/src/headless_backend_wgl.cpp",
    }

    includedirs
    {
        "include",
        "src",
        "vendor/unordered_dense/include",
        "platform/windows/include",
        "platform/default/include",
        "platform/windows/vendor/vcpkg/installed/x64-windows/include",
    }

    disablewarnings
    {
        "4068"
    }

    defines
    {
        "WIN32",
        "_WINDOWS",
        "_USE_MATH_DEFINES",
        "_SILENCE_ALL_CXX17_DEPRECATION_WARNINGS",
        "_CRT_SECURE_NO_WARNINGS",
        "MLN_RENDER_BACKEND_OPENGL=1",
        "MLN_LEGACY_RENDERER=0",
        "MLN_DRAWABLE_RENDERER=1",
        "MLN_USE_UNORDERED_DENSE=1",
        "CURL_STATICLIB",
        "USE_STD_FILESYSTEM",
        "KHRONOS_STATIC",
        "NOMINMAX",
        "GHC_WIN_DISABLE_WSTRING_STORAGE_TYPE",
        "RAPIDJSON_HAS_STDSTRING=1",
        "RAPIDJSON_HAS_CXX11_RVALUE_REFS",
        "CMAKE_INTDIR=\"Debug\"",
    }

    buildoptions
    {
        "/utf-8",
        "/external:I \"vendor/mapbox-base/extras/kdbush.hpp/include\"",
        "/external:I \"vendor/mapbox-base/extras/rapidjson/include\"",
        "/external:I \"vendor/mapbox-base/extras/filesystem/include\"",
        "/external:I \"vendor/mapbox-base/extras/rapidjson/include\"",
        "/external:I \"vendor/mapbox-base/extras/args\"",
        "/external:I \"vendor/mapbox-base/include\"",
        "/external:I \"vendor/mapbox-base/deps/geometry.hpp/include\"",
        "/external:I \"vendor/mapbox-base/extras/kdbush.hpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/supercluster.hpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/shelf-pack-cpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/geojson-vt-cpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/cheap-ruler-cpp/include\"",
        "/external:I \"vendor/boost/include\"",
        "/external:I \"vendor/csscolorparser\"",
        "/external:I \"vendor/earcut.hpp/include\"",
        "/external:I \"vendor/eternal/include\"",
        "/external:I \"vendor/parsedate\"",
        "/external:I \"vendor/polylabel/include\"",
        "/external:I \"vendor/protozero/include\"",
        "/external:I \"vendor/unique_resource\"",
        "/external:I \"vendor/vector-tile/include\"",
        "/external:I \"vendor/wagyu/include\"",
        "/external:I \"vendor/mapbox-base/include\"",
        "/external:I \"vendor/mapbox-base/extras/expected-lite/include\"",
        "/external:I \"vendor/mapbox-base/deps/geojson.hpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/geometry.hpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/jni.hpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/pixelmatch-cpp/include\"",
        "/external:I \"vendor/mapbox-base/deps/variant/include\"",
        "/external:I \"vendor/mapbox-base/extras/rapidjson/include\"",
        "/external:I \"vendor/nunicode/include\"",
        "/external:I \"vendor/sqlite/include\"",
    }

    externalincludedirs
    {
        "vendor/mapbox-base/extras/kdbush.hpp/include",
        "vendor/mapbox-base/extras/rapidjson/include",
        "vendor/mapbox-base/extras/filesystem/include",
        "vendor/mapbox-base/extras/rapidjson/include",
        "vendor/mapbox-base/extras/args",
        "vendor/mapbox-base/include",
        "vendor/mapbox-base/deps/geometry.hpp/include",
        "/vendor/mapbox-base/extras/kdbush.hpp/include",
        "/vendor/mapbox-base/deps/supercluster.hpp/include",
        "/vendor/mapbox-base/deps/shelf-pack-cpp/include",
        "/vendor/mapbox-base/deps/geojson-vt-cpp/include",
        "/vendor/mapbox-base/deps/cheap-ruler-cpp/include",
        "/vendor/boost/include",
        "/vendor/csscolorparser",
        "/vendor/earcut.hpp/include",
        "/vendor/eternal/include",
        "/vendor/parsedate",
        "/vendor/polylabel/include",
        "/vendor/protozero/include",
        "/vendor/unique_resource",
        "/vendor/vector-tile/include",
        "/vendor/wagyu/include",
        "/vendor/mapbox-base/include",
        "/vendor/mapbox-base/extras/expected-lite/include",
        "/vendor/mapbox-base/deps/geojson.hpp/include",
        "/vendor/mapbox-base/deps/geometry.hpp/include",
        "/vendor/mapbox-base/deps/jni.hpp/include",
        "/vendor/mapbox-base/deps/pixelmatch-cpp/include",
        "/vendor/mapbox-base/deps/variant/include",
        "/vendor/mapbox-base/extras/rapidjson/include",
        "/vendor/nunicode/include",
        "/vendor/sqlite/include",
    }

    links
    {
        "csscolorparser",
        "sqlite-vendor",
        "nunicode-vendor",
        "parsedate-vendor",
    }

    filter "configurations:Debug"
        runtime "DEBUG"
        symbols "on"

    filter "configurations:Release"
		runtime "Release"
        optimize "on"